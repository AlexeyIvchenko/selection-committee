<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">

    <meta charset="UTF-8">
    <title>Список пользователей приложения</title>
</head>

<body>
<th:block th:include="/_menu"></th:block>
<div class="container">
    <div class="row">

        <form id="form1" th:action="@{/admin/addUser}" th:object="${userForm}" method="POST">
            <div class="form-group has-feedback nameBlock">
                <label class="control-label" for="userLogin">Логин сотрудника:</label>
                <input type="text" class="form-control" id="userLogin" name="userLogin"
                       aria-describedby="inputSuccess2Status"
                       th:field="*{userLogin}"/>
                <span id="loginMessage"></span>
            </div>
            <div class="form-group has-feedback passwordBlock">
                <label class="control-label" for="userPassword">Пароль сотрудника:</label>
                <input type="text" class="form-control" id="userPassword" name="userPassword"
                       aria-describedby="inputSuccess2Status" th:field="*{userPassword}"/>
                <span id="passwordMessage"></span>
            </div>
            <div class="form-group has-feedback rePassBlock">
                <label class="control-label" for="rePassword">Проверка пароля:</label>
                <input type="text" class="form-control" id="rePassword" name="rePassword"
                       aria-describedby="inputSuccess2Status"/>
                <span id="rePassMessage"></span>
            </div>


            <!--<select th:field="*{roleId}">-->
            <!--<option th:each="role: ${rolesList}"-->
            <!--th:value="${role.getRoleId()}"-->
            <!--th:text="${role.getRoleName()}"></option>-->
            <!--</select>-->
            <div>
                <li th:each="role: ${rolesList}">
                    <input type="checkbox" id="role" th:field="*{roles}" th:value="${role.roleId}"/>
                    <label th:text="${role.roleName}"></label>
                </li>
                <span id="roleMessage"></span>
            </div>


            <!-- <input type="submit" name="submit" id="submit" value="Добавить" /> -->
            <button class="btn btn-success" type="submit" id="addUserBtn">Добавить</button>
        </form>

    </div>


    <div class="modal fade" id="confirm-submit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    Подтвержждение действия
                </div>
                <div class="modal-body">
                    <p>Вы уверены, что хотите удалить пользователя?</p>
                    <table class="table">
                        <tr>
                            <th>Last Name</th>
                            <td id="deleteId"></td>
                        </tr>
                    </table>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Отмена</button>
                    <a href="#" id="submit" class="btn btn-success success">Подтвердить</a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="table-responsive">
            <table class="table table-hover">
                <tr class="active">
                    <th>Идентификатор</th>
                    <th>Логин</th>
                    <th>Пароль</th>
                    <th>Онлайн</th>
                    <th>Права</th>
                    <th>Удалить</th>

                </tr>
                <tr th:each="user: ${usersList}">
                    <td th:utext="${user.userId}">...</td>
                    <td th:utext="${user.userLogin}">...</td>
                    <td th:utext="${user.userPassword}">...</td>

                    <td th:if="${user.isOnline()} == true" th:utext="Online">...</td>
                    <td th:if="${user.isOnline()} != true" th:utext="Offline">...</td>

                    <td>
                        <ul>
                            <li th:each="role: ${user.getRoles()}" th:text="${role.getRoleDescription()}"></li>
                        </ul>
                    </td>

                    <!--<td>-->
                    <!--<form id="form2" th:action="@{/deleteUser}" method="POST">-->
                    <!--<input type="hidden" name="userId" th:value="${user.userId}"/>-->
                    <!--<button class="btn btn-primary" type="submit"><i class="icon-user icon-white"></i>Удалить-->
                    <!--</button>-->
                    <!--</form>-->
                    <!--</td>-->

                    <td>
                        <a th:href="@{/admin/deleteUser(userId=${user.userId})}"
                           class="btn btn-danger delete" )>Удалить</a>
                    </td>

                </tr>
            </table>
        </div>
    </div>

</div>
</body>

<script th:src="@{/js/jquery.js}" src="../static/js/jquery.js" type="text/javascript"></script>
<script th:src="@{/js/bootstrap.js}" src="../static/js/bootstrap.js" type="text/javascript"></script>
<script th:src="@{/js/popper.js}" src="../static/js/popper.js" type="text/javascript"></script>
<script th:src="@{/js/bootstrap-confirm-delete.js}" src="../static/js/bootstrap-confirm-delete.js"
        type="text/javascript"></script>
<script th:src="@{/js/validation.js}" src="../static/js/validation.js" type="text/javascript"></script>


</html>